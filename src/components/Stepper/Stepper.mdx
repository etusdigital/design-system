import { Canvas, Story, Meta, Controls } from '@storybook/blocks';
import * as Stepper from './Stepper.stories.ts';

<Meta of={Stepper} />

# Name: Stepper
## Component Overview

**Purpose**: A multi-step navigation component with two visual styles, progress tracking, and customizable step validation for creating guided workflows and multi-step forms.

**Import**: Automatic - no need to import any DS components

<br />
### Playground

<Canvas of={Stepper.Primary} />
<Controls />

---

### Basic Usage

```vue
<template>
    <Stepper 
        v-model="currentStep"
        :options="steps"
    />
</template>

<script setup lang="ts">
import { ref } from 'vue'
const currentStep = ref(...)
const steps = ref([...])
</script>
```

<Canvas sourceState="none" of={Stepper.Primary} />

---

### Props API

#### v-model
Controls the currently active step. Type: `any` (default: `undefined`)

#### options
Array of step options that can be strings or objects. Type: `any[]` (required)

#### label-key
Property name used for displaying item labels when using object arrays. Type: `string` (default: `"label"`)

#### value-key
Property name used for item values when using object arrays. Type: `string` (default: `"value"`)

#### size
Controls the stepper size variant. Type: `'medium' | 'large'` (default: `'medium'`)

<Canvas sourceState="none" of={Stepper.Sizes} />

#### disabled
Disables step navigation when true. Type: `boolean` (default: `false`)

<Canvas sourceState="none" of={Stepper.Disabled} />

#### allowed-skip
Allows users to skip steps and jump to any step. Type: `boolean` (default: `false`)

<Canvas sourceState="none" of={Stepper.AllowedSkip} />

#### background
Custom background color for the stepper. Type: `string` (default: `"var(--neutral-background-default)"`)

#### version
Stepper visual style version. Type: `1 | 2` (default: `1`)

**Version Differences:**
- **Version 1**: Horizontal breadcrumstyle with arrow connectors
- **Version 2**: Circular steps with icons and connecting lines

<Canvas sourceState="none" of={Stepper.Versions} />

#### get-object
Returns the complete item object instead of just the value when true. Type: `boolean` (default: `false`)

---

### Events API

#### @update:model-value
Triggered when the active step changes (v-model). Receives the new step value.

#### @change-step
Triggered when any step interaction occurs. Receives the step item and index.

```vue
<template>
    <Stepper 
        v-model="currentStep"
        :options="steps"
        disabled
        @change-step="handleStepChange"
    />
</template>

<script setup lang="ts">
import { ref, inject } from 'vue'

const toast = inject("toast") as Function;

const currentStep = ref(...)
const steps = ref([...])
const attr = ref(...)

const handleStepChange = (item, index) => {
    if (!isValid()) {
        toast({...})
        return
    }

    if (index != steps.length - 1) currentStep = steps[index + 1]
    else save()
}

const isValid = () => {}
const save = () => {}
</script>
```

---

### Slots API

This component doesn't expose custom slots. Content is controlled through the `options` prop.


**Important Notes:**
- Automatically tracks step progression and prevents skipping unless `allowed-skip` is enabled
- Version 2 requires objects with `icon` property for proper display
- Step validation prevents users from jumping ahead unless explicitly allowed
- Custom background colors apply to button backgrounds and maintain visual consistency
- Progress tracking persists even when users navigate backwards
- Component automatically initializes to first step if no model value is provided
