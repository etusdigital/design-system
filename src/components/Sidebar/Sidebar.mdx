import { Canvas, Story, Meta, Controls } from '@storybook/blocks';
import * as Sidebar from './Sidebar.stories.ts';

<Meta of={Sidebar} />

# Name: Sidebar
## Component Overview

**Purpose**: A vertical navigation sidebar component with hierarchical menu support, automatic route detection, and flexible option positioning for application navigation.

**Import**: Automatic - no need to import any DS components

<br />
### Playground

<Canvas of={Sidebar.Primary} />
<Controls />

---

### Basic Usage

```vue
<template>
    <Sidebar 
        v-model="selectedOption"
        :options="menuOptions"
    />
</template>

<script setup lang="ts">
import { ref } from 'vue'
const selectedOption = ref("home")

const menuOptions = ref([
    ...
    {
        label: "Projects",
        value: "projects",
        path: "/projects",
        icon: "folder",
        options: [
            {
                label: "All Projects",
                value: "all-projects",
                path: "/all",
            },
            {
                label: "Internal",
                value: "internal",
                path: "/internal",
            },
            {
                label: "External",
                value: "external",
                path: "/external",
            },
        ],
    }
    ...
])
</script>
```

<Canvas sourceState="none" of={Sidebar.Primary} />

---

### Props API

#### v-model
Controls the selected menu option value. Type: `any` (default: `""`)

#### options
Array of menu option objects defining the navigation structure. Type: `MenuOption[]` (required)

```typescript
type MenuOption = {
  label: string;       // Display text for the step option
  value: string;       // Unique identifier for the option
  icon: string;        // Icon name for the step option
  disabled?: boolean;  // Whether the option is disabled
  bottom?: boolean;    // Whether to position at bottom of menu
  options?: Option[];      // Nested menu options (for sub-menus)
}
```

#### parent-path
Base path prefix applied to all menu options. Type: `string` (default: `""`)

#### get-object
Returns the complete option object instead of just the value when true. Type: `boolean` (default: `false`)

---

### Events API

#### @update:model-value
Triggered when a menu option is selected. Receives the selected value or object based on `get-object` prop.

---

### Slots API

This component uses internal `Option` components and doesn't expose custom slots.

**Important Notes:**
- Automatically detects and selects options based on current route path
- Height adjusts dynamically based on navbar presence
- Supports 1 nesting levels for complex navigation structures
- Bottom options are separated and positioned at the menu bottom
- Disabled options maintain visual feedback but prevent interaction
- Parent path concatenation enables modular menu composition
- Selection state automatically propagates through nested option hierarchies
