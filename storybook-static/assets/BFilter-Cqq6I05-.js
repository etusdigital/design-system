import{d as L,m as q,a as S,v as D,b as d,u as l,r as k,o as m,q as u,t as h,l as c,e as G,j as p,x as v,k as x,f as b,F,g as O,n as g,h as I,M as R,T as J,y as P,N as Q}from"./vue.esm-bundler-B3dae8Cn.js";import{u as X}from"./OptionalModel-8moGuuLP.js";import{C as Y}from"./Container-I2pMHj_T.js";import{S as Z}from"./SelectContent-7yYIGyTY.js";import{O as ee}from"./Option-BBYBztsW.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const le={class:"font-bold text-neutral-interaction-default"},te={class:"select-count"},se=["aria-selected","tabindex"],ne=["onClick","onKeyup"],oe={class:"text-neutral-interaction-default"},re={class:"flex items-center gap-xs"},de={key:0,class:"flex flex-col gap-xs pb-xxs overflow-auto custom-scroll max-h-[12em] mr-xxs mb-xxs"},ue={key:0,class:"flex items-center text-xl gap-xs pb-xxs border-b-xxs border-neutral-default mb-xxs px-xs"},ie=["onUpdate:modelValue","disabled","placeholder"],fe={class:"flex items-center gap-xs"},A=L({__name:"BFilter",props:{modelValue:{default:void 0},labelValue:{default:""},icon:{default:"filter_list"},expanded:{type:Boolean,default:void 0},labelKey:{default:"label"},selectedKey:{default:"selected"},searchText:{default:"Search"},searchable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},absolute:{type:Boolean,default:!1},error:{type:Boolean,default:!1},errorMessage:{default:""},infoMessage:{default:""},required:{type:Boolean,default:!1},closeOnBlur:{type:Boolean,default:!0},hideBottom:{type:Boolean,default:!1},maxHeight:{default:""},minWidth:{default:"22em"},secondary:{type:Boolean,default:!1},hideArrow:{type:Boolean,default:!1}},emits:["update:modelValue","update:expandedModel","apply"],setup(E,{emit:N}){const t=E,V=N,[y,T]=X(t,"expanded",V,!1);let B=q({}),i=q(-1),o=q(j());function j(){let e=[];return Object.keys(t.modelValue).forEach(a=>{e.push(t.modelValue[a].filter(f=>f[t.selectedKey]==!0))}),e.length}function w(e){if(t.disabled)return;e[t.selectedKey]=!e[t.selectedKey];const a=e[t.selectedKey]?{selected:[e],deselected:[]}:{selected:[],deselected:[e]};e[t.selectedKey]?o.value++:o.value--,V("update:modelValue",t.modelValue,a)}function K(e){i.value===e?i.value=-1:i.value=e}function C(e){return e.filter(a=>a[t.selectedKey]==!0).length}function U(e,a){return a?e.filter(f=>{if(f[t.labelKey].toLowerCase().includes(a.toLowerCase()))return f}):e}function z(){Object.keys(t.modelValue).forEach(e=>{t.modelValue[e]=t.modelValue[e].map(a=>(a[t.selectedKey]=!1,a))}),o.value=0,M()}function M(){V("apply")}return(e,a)=>{const f=k("BIcon"),H=k("BCheckbox"),$=k("BButton");return m(),S(Y,{modelValue:l(y),labelValue:e.labelValue,class:"b-filter",disabled:e.disabled,isError:e.error,errorMessage:e.errorMessage,infoMessage:e.infoMessage,required:e.required,closeOnBlur:!0,hideBottom:!1,maxHeight:e.maxHeight,minWidth:e.minWidth,secondary:e.secondary,hideArrow:e.hideArrow,"onUpdate:modelValue":a[1]||(a[1]=(s,n)=>e.$emit("update:expandedModel",s))},D({items:d(()=>[(m(!0),b(F,null,O(Object.entries(e.modelValue),(s,n)=>(m(),b("li",{role:"option","aria-selected":e.modelValue[n][e.selectedKey],key:s[0],class:g(["flex flex-col gap-[.75em] select-none h-max transition-[height] max-h-[3em] overflow-hidden",{active:l(i)===n}]),tabindex:n,style:{transition:"max-height 0.2s ease"}},[u("div",{class:g(["flex items-center justify-between text-neutral-interaction-default w-full h-full cursor-pointer *:p-xs hover:text-primary-interaction-default hover:bg-primary-surface-hover",{"bg-primary-surface-default text-primary-interaction-default font-bold":l(i)===n}]),onClick:R(r=>K(n),["prevent"]),onKeyup:I(r=>K(n),["space"])},[u("p",oe,h(s[0]),1),u("div",re,[C(s[1])?p(e.$slots,"status",{key:0},()=>[u("span",{class:g(["select-count font-normal",{active:l(i)===n}])},h(C(s[1])),3)],!0):v("",!0),u("div",{class:g(["flex items-center w-fit h-fit transition-transform ease-in-out duration-300 cursor-pointer text-xl",[l(i)===n?"rotate-180 text-primary-interaction-default":"text-neutral-interaction-default"]])},[c(f,{name:"expand_more",size:"xl"})],2)])],42,ne),c(J,{name:"content"},{default:d(()=>[l(i)===n?(m(),b("ul",de,[e.searchable&&!e.disabled?(m(),b("div",ue,[c(f,{name:"search",class:"text-neutral-foreground-low",size:"xl"}),P(u("input",{"onUpdate:modelValue":r=>l(B)[s[0]]=r,type:"search",class:"h-full w-full p-0 m-0 border-none text-xs pb-[.05em] placeholder:text-neutral-foreground-low outline-hidden border-none",style:{"box-shadow":"none"},disabled:e.disabled,placeholder:e.searchText},null,8,ie),[[Q,l(B)[s[0]]]])])):v("",!0),(m(!0),b(F,null,O(U(s[1],l(B)[s[0]]),(r,W)=>(m(),S(ee,{"no-hover":"",disabled:r.disabled,key:W,onClick:_=>w(r),onKey:_=>w(r),class:"flex items-center pl-xxs gap-xs"},{default:d(()=>[c(H,{modelValue:r[e.selectedKey],class:"pointer-events-none"},null,8,["modelValue"]),x(" "+h(r[e.labelKey]),1)]),_:2},1032,["disabled","onClick","onKey"]))),128))])):v("",!0)]),_:2},1024)],10,se))),128))]),actions:d(()=>[p(e.$slots,"actions",{},()=>[u("div",fe,[c($,{size:"small",variant:"plain",onClick:z,disabled:!l(o)},{default:d(()=>[p(e.$slots,"clear-text",{},()=>[a[3]||(a[3]=x(" Clear "))],!0)]),_:3},8,["disabled"]),c($,{type:"button",disabled:!l(o),size:"small",onClick:M},{default:d(()=>[p(e.$slots,"apply-text",{},()=>[a[4]||(a[4]=x(" Apply "))],!0)]),_:3},8,["disabled"])])],!0)]),default:d(()=>[c(Z,{expanded:l(y),"onUpdate:expanded":[a[0]||(a[0]=s=>G(y)?y.value=s:null),l(T)],disabled:e.disabled,icon:e.icon,items:e.modelValue},{status:d(()=>[e.disabled?!l(y)||e.disabled?p(e.$slots,"default",{key:1},void 0,!0):v("",!0):p(e.$slots,"status",{key:0,selected:l(o)},()=>[u("span",le,[p(e.$slots,"status-text",{selected:l(o)},()=>[a[2]||(a[2]=x(" Filters "))],!0)])],!0)]),_:3},8,["expanded","disabled","icon","items","onUpdate:expanded"])]),_:2},[l(o)&&!e.disabled?{name:"complement",fn:d(()=>[u("span",te,h(l(o)),1)]),key:"0"}:void 0]),1032,["modelValue","labelValue","disabled","isError","errorMessage","infoMessage","required","maxHeight","minWidth","secondary","hideArrow"])}}}),ve=ae(A,[["__scopeId","data-v-60a009a2"]]);A.__docgenInfo={exportName:"default",displayName:"BFilter",description:"",tags:{},props:[{name:"modelValue",required:!0,type:{name:"any"},defaultValue:{func:!1,value:"undefined"}},{name:"labelValue",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"icon",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'"filter_list"'}},{name:"expanded",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"undefined"}},{name:"labelKey",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'"label"'}},{name:"selectedKey",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'"selected"'}},{name:"searchText",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'"Search"'}},{name:"searchable",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"absolute",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"error",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"errorMessage",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"infoMessage",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"required",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"closeOnBlur",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"true"}},{name:"hideBottom",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"maxHeight",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"minWidth",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'"22em"'}},{name:"secondary",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"hideArrow",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:expandedModel",type:{names:["boolean"]}},{name:"update:modelValue",type:{names:["Array"],elements:[{name:"any"}]}},{name:"apply"}],slots:[{name:"status",scoped:!0,bindings:[{name:"selected",title:"binding"}]},{name:"status-text",scoped:!0,bindings:[{name:"selected",title:"binding"}]},{name:"default"},{name:"actions"},{name:"clear-text"},{name:"apply-text"}],sourceFiles:["/Users/albertoandre/Dropbox/aa-projects/Github/design-system/src/components/BFilter/BFilter.vue"]};export{ve as B};
