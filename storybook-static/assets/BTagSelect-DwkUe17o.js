import{d as Q,w as W,c as X,m as A,a as C,b as f,r as B,o as i,l as S,f as m,y as E,q as c,n as T,j as y,k as b,A as Y,h as K,M as Z,N as _,F as I,g as N,u as p,t as U}from"./vue.esm-bundler-B3dae8Cn.js";import{u as j}from"./OptionalModel-8moGuuLP.js";import{S as ee}from"./SelectContent-7yYIGyTY.js";import{O as ae}from"./Option-BBYBztsW.js";import{i as g}from"./index-BQ4pCYp0.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne={key:0,class:"relative"},te={class:"pointer-events-none w-0 h-0"},se=["disabled"],oe={key:1,class:"flex flex-wrap gap-xxs my-xs max-w-[40em]"},ue={class:"tag-default py-xxs"},re={class:"font-bold text-xs truncate"},de={key:0,class:"text-xs italic text-neutral-foreground-low flex justify-center"},ie={key:1,class:"text-xs italic text-neutral-foreground-low flex justify-center"},fe={class:"flex justify-center w-full"},L=Q({__name:"BTagSelect",props:{modelValue:{default:void 0},items:{default:void 0},labelValue:{default:""},icon:{},expanded:{type:Boolean,default:!1},labelKey:{default:"label"},errorMessage:{default:""},infoMessage:{default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},absolute:{type:Boolean,default:!1},buttonText:{default:"Add"}},emits:["update:modelValue","update:items","update:expanded"],setup(D,{emit:O}){const o=D,v=O;W(()=>o.expanded,()=>{d.value=o.expanded});const M=X(()=>n.value?r.value.filter(e=>{var a,t,x;if(g(e)){if((t=(a=e[o.labelKey])==null?void 0:a.toLowerCase())!=null&&t.includes(n.value.toLowerCase()))return e}else if((x=e==null?void 0:e.toLowerCase())!=null&&x.includes(n.value.toLowerCase()))return e}):r.value),[u,h]=j(o,"modelValue",v,[]);u.value=u.value||[];const[r,F]=j(o,"items",v,[]),d=A(o.expanded),n=A("");function q(e){if(!(o.isError||!e)){if(V(r.value,e)){n.value="";return}r.value.push(e),F(r.value,{index:r.value.length-1}),n.value=""}}function R(e){u.value.splice(e,1),h(u.value,{index:e})}function z(e){function a(t){h([...u.value,r.value[t]],{index:t}),e.preventDefault()}switch(e.key){case"Home":case"ArrowDown":a(0);break;case"End":case"ArrowUp":{const t=r.value.length-1;a(t)}break}}function $(e,a){o.disabled||V(u.value,e)||(h([...u.value,e],a),d.value=!1,v("update:expanded",!1,{source:"value-selected"}))}function V(e,a){return g(a)?e.find(t=>t[o.labelKey]===a[o.labelKey]):e==null?void 0:e.includes(a)}function G(e){e.target&&setTimeout(()=>{var a,t;(t=(a=e.target)==null?void 0:a.classList)!=null&&t.contains("close-icon")||(d.value=!0,v("update:expanded",!0,{source:"click"}))},1)}function w(e,a){d.value=e,v("update:expanded",e,a)}function H(e,a){(a==null?void 0:a.source)=="click"?w(!0,a):w(e,a)}return(e,a)=>{const t=B("BIcon"),x=B("BTag"),J=B("BRoundButton"),P=B("BSelectContainer");return i(),C(P,{modelValue:d.value,"onUpdate:modelValue":[a[6]||(a[6]=l=>d.value=l),H],required:e.required,"label-value":e.labelValue,disabled:e.disabled,absolute:e.absolute,"is-error":e.isError,"error-message":e.errorMessage,"info-message":e.infoMessage,"max-height":"none","min-width":"12em",onKeyup:z,onClick:a[7]||(a[7]=l=>w(!0,{source:"click"}))},{items:f(()=>[!M.value.length&&n.value.length?(i(),m("div",de,[y(e.$slots,"no-items-found",{},()=>[a[10]||(a[10]=b(" No result found. "))],!0)])):p(r).length?(i(!0),m(I,{key:2},N(M.value,(l,s)=>(i(),C(ae,{"aria-selected":V(p(u),l),key:`${p(g)(l)?l[e.labelKey]:l}`,tabindex:"0",class:T({"font-bold":V(p(u),l)}),onClick:k=>$(l,s),onKeyup:K(k=>$(l,s),["space"])},{default:f(()=>[y(e.$slots,"item",{item:l,index:s},()=>[b(U(p(g)(l)?l[e.labelKey]:l),1)],!0)]),_:2},1032,["aria-selected","class","onClick","onKeyup"]))),128)):(i(),m("div",ie,[y(e.$slots,"no-items",{},()=>[a[11]||(a[11]=b(" No tags created yet. "))],!0)]))]),actions:f(()=>[c("div",fe,[S(J,{onClick:a[5]||(a[5]=l=>q(n.value)),text:e.buttonText,"always-open":""},null,8,["text"])])]),default:f(()=>[S(ee,{modelValue:n.value,"onUpdate:modelValue":a[3]||(a[3]=l=>n.value=l),expanded:d.value,"onUpdate:expanded":[a[4]||(a[4]=l=>d.value=l),w],disabled:e.disabled,icon:e.icon,items:e.items,onClick:G},{searchText:f(()=>[y(e.$slots,"search-text",{},()=>[a[8]||(a[8]=b("Search"))],!0)]),status:f(()=>{var l;return[d.value||!((l=e.modelValue)!=null&&l.length)?(i(),m("div",ne,[E(c("div",te,[c("span",{class:T(["absolute text-neutral-foreground-low top-[50%] translate-y-[-50%]",{"text-danger-foreground-low":e.isError}])},[y(e.$slots,"search-text",{},()=>[a[9]||(a[9]=b("Search"))],!0)],2)],512),[[Y,!n.value.length]]),E(c("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>n.value=s),type:"text",class:T(["search",{"bg-danger-surface-default text-danger-foreground-low":e.isError,"bg-neutral-surface-disabled text-neutral-foreground-low":e.disabled}]),onKeydown:[a[1]||(a[1]=K(s=>q(n.value),["enter"])),a[2]||(a[2]=K(Z(s=>q(n.value),["prevent"]),["tab"]))],style:{"--tw-ring-color":"none !important"},disabled:e.disabled},null,42,se),[[_,n.value]])])):(i(),m("div",oe,[(i(!0),m(I,null,N(p(u),(s,k)=>(i(),C(x,{color:"transparent",class:"tag",key:k},{default:f(()=>[c("div",ue,[c("p",re,U(p(g)(s)?s[e.labelKey]:s),1),S(t,{name:"close",onClick:pe=>R(k),class:"close-icon"},null,8,["onClick"])])]),_:2},1024))),128))]))]}),_:3},8,["modelValue","expanded","disabled","icon","items"])]),_:3},8,["modelValue","required","label-value","disabled","absolute","is-error","error-message","info-message"])}}}),Ve=le(L,[["__scopeId","data-v-06d56272"]]);L.__docgenInfo={exportName:"default",displayName:"BTagSelect",description:"",tags:{},props:[{name:"modelValue",required:!1,type:{name:"Array",elements:[{name:"any"}]},defaultValue:{func:!1,value:"undefined"}},{name:"items",required:!1,type:{name:"Array",elements:[{name:"any"}]},defaultValue:{func:!1,value:"undefined"}},{name:"labelValue",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"icon",required:!1,type:{name:"string"}},{name:"expanded",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"labelKey",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'"label"'}},{name:"errorMessage",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"infoMessage",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"disabled",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"required",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isError",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"absolute",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"buttonText",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'"Add"'}}],events:[{name:"update:modelValue",type:{names:["Array"],elements:[{name:"any"}]}},{name:"update:items",type:{names:["Array"],elements:[{name:"any"}]}},{name:"update:expanded",type:{names:["boolean"]}}],slots:[{name:"search-text"},{name:"no-items-found"},{name:"no-items"},{name:"item",scoped:!0,bindings:[{name:"item",title:"binding"},{name:"index",title:"binding"}]}],sourceFiles:["/Users/albertoandre/Dropbox/aa-projects/Github/design-system/src/components/BTagSelect/BTagSelect.vue"]};export{Ve as B};
