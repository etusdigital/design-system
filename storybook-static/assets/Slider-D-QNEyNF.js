import{d as K,C as O,D as Q,w as V,m as y,c as N,f as p,q as Z,F as S,g as q,n as M,o as m,a as ee,x as te,z as F,r as ae,I as le}from"./vue.esm-bundler-B3dae8Cn.js";import{g as I,q as oe}from"./index-BQ4pCYp0.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";const se=["aria-disabled"],ue=["onMousedown","onTouchstart"],A=K({__name:"Slider",props:{modelValue:{default:void 0},size:{default:"small"},max:{default:0},unit:{default:""},color:{default:""},showTooltip:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},fillColors:{},isRange:{type:Boolean,default:!1},steps:{default:void 0},neutralBackground:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(_,{emit:$}){le(e=>({"5488f378":e.color,"0dbc22ed":D.value}));const a=_,C=$;O(()=>{window.addEventListener("mousemove",E),window.addEventListener("mouseup",g),window.addEventListener("touchmove",R),window.addEventListener("touhend",g),w()}),Q(()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",g),window.removeEventListener("touchmove",R),window.removeEventListener("touhend",g)}),V(()=>a.modelValue,()=>{i.value=b(),w();const e=x();(!a.modelValue||!a.modelValue.length||e.find((t,o)=>a.modelValue&&t!=a.modelValue[o])!=null)&&C("update:modelValue",e)}),V(()=>a.vertical,()=>{i.value=b(),setTimeout(()=>{w()},200)}),V(()=>a.size,()=>{i.value=b(),setTimeout(()=>{w()},100)}),V(()=>a.max,()=>{C("update:modelValue",x())});const i=y(b()),v=y([!1]);a.isRange&&v.value.push(!1);const r=y(),d=y(),c=y(),U=N(()=>{const e=Math.min(...i.value),t=Math.max(...i.value);return a.isRange?`${B(e)} - ${B(t)}`:B(t)}),D=N(()=>a.neutralBackground||!a.color?"":oe(a.color));function j(e){const t=e*100+"%",o={};if(a.vertical?o.bottom=t:o.left=t,a.disabled)return o;if(a.fillColors&&a.fillColors.length){const l=Math.min(...i.value),n=Math.max(...i.value)-l,s=e-l,u=n/a.fillColors.length,f=a.fillColors.find((h,L)=>{const Y=L*u,J=(L+1)*u;if(s>=Y&&s<=J&&a.fillColors)return a.fillColors[L]});o.background=f}else a.color&&P(e)&&(o.background=a.color);return o}function P(e){const t=Math.max(...i.value),o=Math.min(...i.value),l=e;return l<=t&&l>=o}function B(e){const t=a.max?a.unit:a.unit||"%";return`${((a.max||100)*e).toFixed(1)+t}`}function g(){v.value=v.value.map(()=>!1)}function b(){var t;const e=[0,0];return(t=a.modelValue)==null||t.forEach((o,l)=>{let n=o;a.max&&(n=o/a.max),e[l]=k(Math.min(1,Math.max(0,n)))}),e}function x(){const e=[0,0];return i.value.forEach((t,o)=>{let l=t;a.max&&(l=t*a.max),e[o]=l}),e}function k(e){return!a.steps||!a.steps.length?e:a.steps.reduce((t,o)=>Math.abs(o-e)<Math.abs(t-e)?o:t)}function G(e){W(e.touches[0])}function X(e,t){T(e.touches[0],t)}function R(e){E(e.touches[0])}function W(e){if(!c.value||!r.value)return;let t=0;const o=I(e,r.value[0],c.value);let l=1/0;if(a.vertical){const n=o.y;r.value.forEach((s,u)=>{const f=Number(s.style.bottom.replace("px","")),h=Math.abs(f-n);h<l&&(l=h,t=u)})}else{const n=o.x;r.value.forEach((s,u)=>{const f=s.offsetLeft,h=Math.abs(f-n);h<l&&(l=h,t=u)})}T(e,t)}function T(e,t){r.value&&(g(),v.value[t]=!0,z(e,r.value[t],v.value[t],t))}function E(e){v.value.forEach((t,o)=>{r.value&&z(e,r.value[o],t,o)})}function z(e,t,o,l=0){if(!o||!t||!c.value)return;let n=0;const s=I(e,t,c.value);if(a.vertical){const u=s.y,f=c.value.clientHeight-t.clientHeight/2;n=k(u/f)}else{const u=s.x,f=c.value.clientWidth-t.clientWidth/2;n=k(u/f)}H(),i.value[l]=n,C("update:modelValue",x())}function w(){var e;(e=r.value)==null||e.forEach((t,o)=>{if(!(!t||!c.value))if(a.vertical){const l=c.value.clientHeight,n=Math.min(l,Math.max(0,l*i.value[o])),s=Number(t.style.borderWidth.replace("px",""))/2;t.style.bottom=n-t.clientHeight/3-s+"px",t.style.left="50%"}else{const l=c.value.clientWidth,n=Math.min(l,Math.max(0,l*i.value[o])),s=Number(t==null?void 0:t.computedStyleMap().get("--border-width-xs").toString().replace("px",""))/2;t.style.left=n-t.clientWidth/3-s+"px",t.style.bottom="50%"}}),H()}function H(){if(!(!d.value||!r.value||!c.value))if(a.vertical){const e=c.value.clientHeight,t=r.value.map(u=>u.clientHeight/2),l=r.value.map(u=>u.offsetTop).map((u,f)=>e-u-t[f]),n=a.isRange?Math.min(...l):0,s=Math.max(0,Math.max(...l));d.value.style.bottom=n+"px",d.value.style.height=Math.abs(s-n)+"px",d.value.style.left="50%",d.value.style.width="100%"}else{const e=r.value.map(l=>l.offsetLeft+l.clientWidth/3),t=a.isRange?Math.min(...e):0,o=Math.max(...e);d.value.style.left=t+"px",d.value.style.width=Math.abs(o-t)+r.value[0].clientWidth/6+"px",d.value.style.bottom="50%",d.value.style.height="100%"}}return(e,t)=>{const o=ae("BTooltip");return m(),p("div",{ref_key:"slider",ref:c,class:M(["slider",[e.size,{disabled:e.disabled,vertical:e.vertical,horizontal:!e.vertical,"step-slider":e.steps&&e.steps.length,"neutral-bg":e.neutralBackground,"is-custom-color":!!D.value}]]),"aria-disabled":e.disabled,onMousedown:W,onTouchstart:G},[(m(!0),p(S,null,q(v.value,(l,n)=>(m(),p("span",{ref_for:!0,ref_key:"cursors",ref:r,key:n,class:M(["cursor cursor-slider relative select-none",{grabbing:l,colored:e.color}]),onMousedown:s=>T(s,n),onTouchstart:s=>X(s,n)},[e.showTooltip?(m(),ee(o,{key:0,text:U.value,position:e.vertical?"right":"top",class:"cursor-tooltip select-none"},null,8,["text","position"])):te("",!0)],42,ue))),128)),Z("div",{ref_key:"fillBar",ref:d,class:M(["fill-bar",{"flex-col-reverse":e.vertical,"have-fill-colors":e.fillColors&&e.fillColors.length,colored:e.color&&!(e.fillColors&&e.fillColors.length)&&!e.disabled}])},[(m(!0),p(S,null,q(e.fillColors,l=>(m(),p("div",{class:"w-full h-full",style:F({background:l})},null,4))),256))],2),(m(!0),p(S,null,q(e.steps,l=>(m(),p("div",{key:l,class:M(["step",{active:P(l)}]),style:F(j(l))},null,6))),128))],42,se)}}}),fe=ne(A,[["__scopeId","data-v-191a1d42"]]);A.__docgenInfo={exportName:"default",displayName:"Slider",description:"",tags:{},props:[{name:"modelValue",required:!1,type:{name:"Array",elements:[{name:"number"}]},defaultValue:{func:!1,value:"undefined"}},{name:"size",required:!1,type:{name:"union",elements:[{name:'"small"'},{name:'"medium"'},{name:'"large"'}]},defaultValue:{func:!1,value:'"small"'}},{name:"max",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"unit",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"color",required:!1,type:{name:"string"},defaultValue:{func:!1,value:'""'}},{name:"showTooltip",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"disabled",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"vertical",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"fillColors",required:!1,type:{name:"Array",elements:[{name:"any"}]}},{name:"isRange",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"steps",required:!1,type:{name:"Array",elements:[{name:"any"}]},defaultValue:{func:!1,value:"undefined"}},{name:"neutralBackground",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue",type:{names:["Array"],elements:[{name:"number"}]}}],sourceFiles:["/Users/albertoandre/Dropbox/aa-projects/Github/design-system/src/utils/components/Slider.vue"]};export{fe as S};
