import{d as ge,C as me,m as c,D as ye,w as te,a as xe,b as be,n as ae,r as E,o as Ce,q as i,z as we,l as P,y as le,t as W,A as oe}from"./vue.esm-bundler-B3dae8Cn.js";import{g as _e,h as Se,a as $e,r as w,b as Te,e as Me,f as De,j as Ve,k as Ne}from"./index-BQ4pCYp0.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Be={class:"relative"},Le={class:"flex items-center gap-sm"},Oe={class:"flex flex-col gap-xs w-full"},Ae={class:"flex items-center gap-sm"},He={class:"flex items-center gap-xxs"},Ie={class:"flex flex-col items-center overflow-hidden relative h-[1em] w-fit text-neutral-interaction-default"},Ee={class:"flex flex-col"},ne=ge({__name:"BColorPicker",props:{modelValue:{default:void 0},type:{default:"hexa"},noShadow:{type:Boolean,default:!1}},emits:["update:modelValue","update:type"],setup(se,{emit:re}){const d=se,b=re;me(()=>{window.addEventListener("mousemove",B),window.addEventListener("mouseup",()=>{m.value=!1,y.value=!1,x.value=!1}),window.addEventListener("touchmove",j),window.addEventListener("touchend",()=>{m.value=!1,y.value=!1,x.value=!1}),$(),setTimeout(()=>{O()},100)}),ye(()=>{window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",()=>{m.value=!1,y.value=!1,x.value=!1}),window.removeEventListener("touchmove",j),window.removeEventListener("touchend",()=>{m.value=!1,y.value=!1,x.value=!1})}),te(()=>d.type,()=>{const e=v.value.findIndex(a=>a==d.type);s.value=e!==-1?e:0,H(!1)}),te(()=>d.modelValue,()=>{r.value!=d.modelValue&&(r.value=d.modelValue||r.value,O())});const m=c(!1),y=c(!1),x=c(!1),g=c(),p=c(),f=c(),u=c(),C=c(d.modelValue||"rgba(255, 255, 255, 1)"),M=c("hsl(0, 100%, 50%)"),D=c(1),r=c(d.modelValue||ie()),v=c(["hexa","hsla","hwb","hsva","rgba"]),s=c(v.value.findIndex(e=>e==d.type)!==-1?v.value.findIndex(e=>e==d.type):0),_=c(!1),S=c(!1);function ie(){return d.type=="hexa"?"#ffffffff":d.type=="hsla"?"0, 100%, 0%, 1":d.type=="hwb"?"0 100% 0% / 1":d.type=="hsva"?"0, 0%, 100%, 1":"255, 255, 255, 1"}function V(e){m.value=!0,G(e)}function N(e){y.value=!0,q(e)}function k(e){x.value=!0,z(e)}function B(e){G(e),q(e),z(e)}function F(e){k(e.touches[0])}function R(e){N(e.touches[0])}function U(e){V(e.touches[0])}function j(e){B(e.touches[0])}function q(e){var a;if(y.value&&p.value){const t=p.value.closest(".slider"),l=(a=u.value)==null?void 0:a.getContext("2d");if(!t||!u.value||!l)return;const o=L(e,p.value,t).left;p.value.style.left=o+"px";const n=t.clientWidth-10,h=o/n;D.value=h,$(M.value,h),Y()}}function G(e){var a,t;if(m.value&&g.value){const l=(a=g.value)==null?void 0:a.closest(".slider"),o=(t=p.value)==null?void 0:t.closest(".slider");if(!l||!u.value||!o)return;const n=L(e,g.value,l).left;g.value.style.left=n+"px";const h=X(l,n);M.value=h,o.style.background=`linear-gradient(
            to right,
            #ffffff 0%,
            ${h}
        )`,$(h,D.value),Y()}}function z(e){var a;if(x.value&&f.value){const t=(a=u.value)==null?void 0:a.getContext("2d");if(!u.value||!t)return;const l=L(e,f.value,u.value,!0);f.value.style.left=l.left+"px",f.value.style.top=l.top+"px";const o=t.getImageData(Math.min(u.value.clientWidth-1,l.left+5),Math.min(u.value.clientHeight-1,l.top),1,1).data;C.value=`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${o[3]/255})`,r.value=A({r:o[0],g:o[1],b:o[2],a:o[3]/255}),b("update:modelValue",r.value)}}function X(e,a){const t=document.createElement("canvas");t.width=e.clientWidth,t.height=e.clientHeight;const l=t.getContext("2d");if(!l)return"";const o=l.createLinearGradient(0,0,t.width,0);o.addColorStop(0,"hsl(0, 100%, 50%)"),o.addColorStop(1/6,"hsl(60, 100%, 50%)"),o.addColorStop(2/6,"hsl(120, 100%, 50%)"),o.addColorStop(3/6,"hsl(180, 100%, 50%)"),o.addColorStop(4/6,"hsl(240, 100%, 50%)"),o.addColorStop(5/6,"hsl(300, 100%, 50%)"),o.addColorStop(1,"hsl(360, 100%, 50%)"),l.fillStyle=o,l.fillRect(0,0,t.width,t.height);const n=l.getImageData(a,0,1,1).data;return`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${n[3]/255})`}function $(e="hsl(0, 100%, 50%)",a=1){const t=u.value,l=t==null?void 0:t.getContext("2d");if(!l||!t)return;t.width=t.clientWidth,t.height=t.clientHeight,l.clearRect(0,0,t.width,t.height),l.globalAlpha=a;const o=l.createLinearGradient(0,0,t.width,0);o.addColorStop(0,"#ffffff"),o.addColorStop(1,e);const n=l.createLinearGradient(0,0,0,t.height);n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"#000000"),l.fillStyle=o,l.fillRect(0,0,t.width,t.height),l.fillStyle=n,l.fillRect(0,0,t.width,t.height)}function L(e,a,t,l=!1){const o=_e(e,a,t,{top:!0,left:!0},{x:l?5:1,y:a.clientHeight},{x:l?-5:0});return{left:o.x,top:o.y}}function Y(){var o;const e=(o=u.value)==null?void 0:o.getContext("2d");if(!e||!f.value||!u.value)return;const a=Number(f.value.style.left.replace("px",""))+5,t=Number(f.value.style.top.replace("px","")),l=e.getImageData(Math.min(u.value.clientWidth-1,a),Math.min(u.value.clientHeight-1,t),1,1).data;C.value=`rgba(${l[0]}, ${l[1]}, ${l[2]}, ${l[3]/255})`,r.value=A({r:l[0],g:l[1],b:l[2],a:l[3]/255}),b("update:modelValue",r.value)}function O(){var Z,ee;const e=(Z=g.value)==null?void 0:Z.closest(".slider"),a=(ee=p.value)==null?void 0:ee.closest(".slider");if(!g.value||!p.value||!f.value||!e||!a)return;const t=ue(),l=Math.min(1,t.h/360),o=Math.min(e.clientWidth-10,Math.max(0,(e.clientWidth-10)*l)),n=a.clientWidth-10,h=Math.min(n,Math.max(0,n*t.a)),K=h/n;D.value=K,g.value.style.left=o+"px",p.value.style.left=h+"px";const I=X(e,o);M.value=I,a.style.background=`linear-gradient(
        to right,
        #ffffff 0%,
        ${I}
    )`,$(I,K);const he=Se(t.h,Number(t.s.toString().replace("%","")),Number(t.v.toString().replace("%","")),t.a);C.value=de(he);const Q=fe(t);f.value.style.left=Q.x+"px",f.value.style.top=Q.y+"px",b("update:modelValue",r.value)}function ue(){var a;if(s.value==0){const t=$e(r.value);return w(t.r,t.g,t.b,isNaN(t.a)?1:t.a)}else if(s.value==1){const t=T(r.value,"hlsa"),l=Te(t.h,t.s,t.l,t.a);return w(l.r,l.g,l.b,isNaN(l.a)?1:l.a)}else if(s.value==2){const t=T(r.value,"hwb"," "),l=r.value.split("/"),o=Me(t.h,t.w,t.b,Number((a=l[1])==null?void 0:a.replace(")","")));return w(o.r,o.g,o.b,isNaN(o.a)?1:o.a)}else if(s.value==3)return T(r.value,"hsva");const e=T(r.value);return w(e.r,e.g,e.b,isNaN(e.a)?1:e.a)}function A(e){if(s.value==0)return De(e.r,e.g,e.b,e.a);if(s.value==1){const a=Ve(e.r,e.g,e.b,e.a);return`${a.h.toFixed(0)}, ${a.s}, ${a.l}, ${a.a<1?a.a.toFixed(2):a.a}`}else if(s.value==2){const a=Ne(e.r,e.g,e.b,e.a);return`${a.h} ${a.w} ${a.b} / ${a.a<1?a.a.toFixed(2):a.a}`}else if(s.value==3){const a=w(e.r,e.g,e.b,e.a);return`${a.h}, ${a.s}, ${a.v}, ${a.a<1?a.a.toFixed(2):a.a}`}return`${e.r}, ${e.g}, ${e.b}, ${e.a<1?e.a.toFixed(2):e.a}`}function T(e,a="rgba",t=","){if(!e)return"";const l={},o=Array.from(a),n=e.split(t);return J(o,n,l)}function ce(e,a=","){if(!e)return"";const t={},l=e.split("(");if(l.length<2)return;const o=Array.from(l[0]);l[1]=l[1].replace(")","");const n=l[1].split(a);return J(o,n,t)}function J(e,a,t){return e.forEach((l,o)=>{t[l]=typeof a[o]=="string"?Number(a[o].replace("%","")):a[o]||1}),t}function de(e){let a="",t="";return Object.keys(e).forEach((l,o)=>{t+=l,a+=Object.keys(e).length-1==o?e[l]:`${e[l]}, `}),`${t}(${a})`}function fe(e){const a=u.value;if(!a)return;const t={h:e.h,s:typeof e.s=="string"?Number(e.s.replace("%","")):e.s,v:typeof e.v=="string"?Number(e.v.replace("%","")):e.v,a:e.a},l=Math.max(-5,Math.min(t.s/100*(a.clientWidth-5),a.clientWidth-5)),o=Math.max(0,Math.min((1-t.v/100)*a.clientHeight,a.clientHeight));return{x:l,y:o}}function ve(){_.value=!0,setTimeout(()=>{_.value=!1,s.value=s.value+1>v.value.length-1?0:s.value+1,H()},600)}function pe(){S.value=!0,setTimeout(()=>{s.value=s.value-1<0?v.value.length-1:s.value-1,S.value=!1,H()},600)}function H(e=!0){r.value=A(ce(C.value)),b("update:modelValue",r.value),e&&b("update:type",v.value[s.value])}return(e,a)=>{const t=E("BInput"),l=E("BIcon"),o=E("BCard");return Ce(),xe(o,{id:"b-color-picker",class:ae(["p-base flex flex-col gap-sm",{"no-shadow":e.noShadow}])},{default:be(()=>[i("div",Be,[i("span",{class:"cursor cursor-area",ref_key:"cursorColorArea",ref:f,onMousedown:k,onTouchstart:F},null,544),i("canvas",{class:"color-area",ref_key:"colorArea",ref:u,onMousedown:k,onTouchstart:F},null,544)]),i("div",Le,[i("div",{class:"color-circle",style:we({background:C.value})},null,4),i("div",Oe,[i("div",{class:"slider",onMousedown:V,onTouchstart:U},[i("span",{ref_key:"cursorColorSlider",ref:g,class:"cursor cursor-slider",onMousedown:V,onTouchstart:U},null,544)],32),i("div",{class:"slider-opacity slider flex justify-end",onMousedown:N,onTouchstart:R},[i("span",{class:"cursor cursor-slider",ref_key:"cursorOpacitySlider",ref:p,onMousedown:N,onTouchstart:R},null,544)],32)])]),i("div",Ae,[P(t,{modelValue:r.value,"onUpdate:modelValue":[a[0]||(a[0]=n=>r.value=n),O],"text-align":"center",class:"flex-1"},null,8,["modelValue"]),i("div",He,[i("div",Ie,[le(i("p",{class:"font-bold slide-down"},W(v.value[s.value+1>v.value.length-1?0:s.value+1].toUpperCase()),513),[[oe,_.value]]),i("p",{class:ae(["font-bold",{"slide-down":_.value,"slide-up":S.value}])},W(v.value[s.value].toUpperCase()),3),le(i("p",{class:"font-bold slide-up"},W(v.value[s.value-1<0?v.value.length-1:s.value-1].toUpperCase()),513),[[oe,S.value]])]),i("div",Ee,[P(l,{name:"arrow_drop_up",class:"cursor-pointer flex items-center h-[.8em] text-neutral-interaction-default",onClick:pe}),P(l,{name:"arrow_drop_down",class:"cursor-pointer flex items-center h-[.8em] text-neutral-interaction-default",onClick:ve})])])])]),_:1},8,["class"])}}}),Re=ke(ne,[["__scopeId","data-v-5f44c89c"]]);ne.__docgenInfo={exportName:"default",displayName:"BColorPicker",description:"",tags:{},props:[{name:"modelValue",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"undefined"}},{name:"type",required:!1,type:{name:"union",elements:[{name:'"hexa"'},{name:'"hsla"'},{name:'"hwb"'},{name:'"hsva"'},{name:'"rgba"'}]},defaultValue:{func:!1,value:'"hexa"'}},{name:"noShadow",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"update:modelValue",type:{names:["string"]}},{name:"update:type",type:{names:["string"]}}],sourceFiles:["/Users/albertoandre/Dropbox/aa-projects/Github/design-system/src/components/BColorPicker/BColorPicker.vue"]};export{Re as B};
